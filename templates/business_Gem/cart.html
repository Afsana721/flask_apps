{% extends "business_Gem/base.html" %}
{% block title %}Cart | AptiCraft{% endblock %}
{% block content %}
<section class="min-h-screen bg-[#63686e] border-1 border-[#d1cebd] rounded-xl py-12 px-6 mt-12 animate-fade-in">
  <div class="max-w-5xl mx-auto bg-[#d1cebd]  rounded-xl border-2 border-[#63686e] shadow-lg p-6">
    <a href="/dashboard" class="text-[#0c005a] hover:underline text-xl mb-4 inline-block">← Back to Dashboard</a>
    <h2 class="text-2xl font-extrabold text-center text-[#430f58] mb-6 animate-bounce">Your Shopping Cart</h2>

    <div class="grid md:grid-cols-3 gap-6">
      <!-- Cart Item List -->
      <div class="md:col-span-2">
        <table class="w-full text-left border-collapse text-sm">
          <thead>
            <tr class="text-indigo-700 border-b text-sm">
              <th class="pb-2">Image</th>
              <th class="pb-2">Product</th>
              <th class="pb-2">Description</th>
              <th class="pb-2">Price</th>
              <th class="pb-2">Remove</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart_items %}
            <tr class="border-b hover:bg-indigo-50">
              <td class="py-1 text-sm">
                <img src="{{ item[4] or 'https://via.placeholder.com/100' }}" alt="{{ item[1] }}"
                  class="w-16 h-16 object-cover rounded">
              </td>
              <td class="py-3 font-semibold text-indigo-800">{{ item[1] }}</td>
              <td class="py-3 text-gray-600">{{ item[2] }}</td>
              <td class="py-3 text-indigo-700 font-semibold">${{ item[3] }}</td>
              <td class="py-3">
                <a href="{{ url_for('add_to_cart', product_id=item[0]) }}"
                  class="text-indigo-600 hover:underline text-sm mr-3">Add</a>
                <form method="POST" action="{{ url_for('checkout') }}">
                  <button type="submit" class="text-red-600 hover:underline text-sm">Remove</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

        <!-- Invoice Section -->
        <div class="mt-10 border-t pt-6 text-black">
          <div class="flex items-center mb-4">
            <img src="{{ url_for('static', filename='assets/basic/OQQ_logo.jpg') }}" class="w-10 h-10 mr-2">
            <h4 class="text-xl font-semibold text-indigo-700">Invoice</h4>
          </div>
          <ul class="text-black text-sm space-y-1 mb-4">
            {% for item in cart_items %}
            <li>✔️ {{ item[1] }} — Qty: 1 — ${{ item[3] }}</li>
            {% endfor %}
          </ul>
          <p class="text-right font-bold text-lg">Total: ${{ total|default(0)|round(2) }}</p>

          <!-- User Details Below Invoice -->
          <div class="mt-6">
            <h5 class="text-md font-semibold text-indigo-700 mb-2">Shipping Information</h5>
            <form method="POST" action="{{ url_for('checkout') }}">
              <input type="text" name="name" placeholder="Full Name" required class="p-2 border rounded col-span-2" />
              <input type="email" name="email" placeholder="Email Address" required
                class="p-2 border rounded col-span-2" />
              <input type="text" name="phone" placeholder="Phone Number" required
                class="p-2 border rounded col-span-1" />
              <input type="text" name="address" placeholder="Shipping Address" required
                class="p-2 border rounded col-span-1" />
              <button type="submit"
                class="col-span-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ease-in-out">
                Confirm Order & Pay
              </button>
            </form>
          </div>
        </div>
      </div>

      <!-- Order Summary Section -->
      <div class="bg-[#f4eeff] border-2 border-[#d1cebd] p-6 rounded-xl shadow">
        <h3 class="text-lg font-bold text-indigo-700 mb-4">Order Summary</h3>
        <p class="text-sm mb-2">Items: {{ cart_items|length }}</p>
        <p class="text-sm mb-2">Subtotal:</p>
        <p class="text-2xl font-bold text-indigo-800 mb-4">${{ total|default(0)|round(2) }}</p>

        <h4 class="text-md font-semibold text-indigo-600 mb-2">Invoice Information</h4>
        <ul class="text-sm text-gray-700 space-y-1">
          {% for item in cart_items %}
          <li>✔️ {{ item[1] }} — ${{ item[3] }}</li>
          {% endfor %}
        </ul>
       <p class="mt-4 text-right font-bold">Total: ${{ total|default(0)|round(2) }}</p>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.8s ease-out;
  }
</style>
{% endblock %}


